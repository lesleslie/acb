---
id: 01K6HKJ2K6MSMNAE7JK4NRBRFX
---
______________________________________________________________________

## id: 01K6HG51EG17T74WJ7MB2JQZ30

______________________________________________________________________

## id: 01K6HFHW71PZQ82NPE06B1DRQQ

______________________________________________________________________

## id: 01K6HFCSFAQ9CM3K8MR7NMBA94

______________________________________________________________________

## id: 01K6GZR1SD1GWP9728GPFB8JKF

______________________________________________________________________

## id: 01K6GZP4T0K3HWQ9X5WT7X4B28

______________________________________________________________________

## id: 01K6GSR97M1CRRJ3Y07Z6QFZY8

______________________________________________________________________

## id: 01K6GSM4E5RXYXQ7VNQEH4NQ6X

______________________________________________________________________

## id: 01K6GPA2NHSC6JVVYBD64J50JD

______________________________________________________________________

## id: 01K6GMDP0HQY29YN3Z6ZZ4VZNZ

______________________________________________________________________

## id: 01K6GKSSSGHB15F6J707G91FBA

______________________________________________________________________

## id: 01K6GKJH1JT2K3TM03VQB12BEA

______________________________________________________________________

## id: 01K6GJYE4ZB3AZNVGADZYFAA46

______________________________________________________________________

## id: 01K6GGM9BNZ1FFQQ9PE2MAZ1T2

______________________________________________________________________

## id: 01K6G687G8T1TH3RKJVQ8WAARC

______________________________________________________________________

## id: 01K6G5HQMWC3HXPAB0QNPSWH7B

______________________________________________________________________

## id: 01K6G58H089WC09657J71EZ825

______________________________________________________________________

## id: 01K6G4MFWPRAY8S5JPESVNS9E2

______________________________________________________________________

## id: 01K6G3R8NJ2BVM5E1CCN19MJ66

______________________________________________________________________

## id: 01K6G395WDQ9JRSMTY18DGYSZ3

______________________________________________________________________

## id: 01K6FZP8MJY9JRXPMCEX7X955Z

______________________________________________________________________

## id: 01K6FY3SBWXNE3H4E50QYM5PK1

______________________________________________________________________

## id: 01K6FVEBRM4XXKP2JGJ9Q6HPQF

______________________________________________________________________

## id: 01K6FSH3DNMSYN75WQ0RHGXFMQ

______________________________________________________________________

## id: 01K6FSG5DDHGSMFNEXVAGC8YQ9

______________________________________________________________________

## id: 01K6FSAS1NW95S5Z8G4JDYZHC1

______________________________________________________________________

## id: 01K6FRWEH2MFBSESVWQG9JF879

______________________________________________________________________

## id: 01K6FRSR89EWG9TRF6Q7VX8AXX

______________________________________________________________________

## id: 01K6FRKVPRBQPPEHZ5M4EYXJBP

______________________________________________________________________

## id: 01K6FRJ64V8E7MMP79X9H6C220

______________________________________________________________________

## id: 01K6FRDY86VGJ6H1ZJM5B3VTZW

______________________________________________________________________

## id: 01K6FQVY55CRCH04DGGHX52H89

______________________________________________________________________

## id: 01K6FQNY1SRJMJCR8W1E3GBXKX

______________________________________________________________________

## id: 01K6FQ9DN47S9Q2GA7V46DZN88

______________________________________________________________________

## id: 01K6FQ06CA3DE0438QTBM6FDQQ

______________________________________________________________________

## id: 01K6FPYA8ZAA2JTJ0FWGT5ZWDR

______________________________________________________________________

## id: 01K6FPVWWH399PR8APCA8JD97S

______________________________________________________________________

## id: 01K6FP91134ZVM9N25DE8QCMAJ

______________________________________________________________________

## id: 01K6FP1ZHH5GFC220B48DG0PQ4

______________________________________________________________________

## id: 01K6FP078DDVDHDMFMVYTD5VKS

______________________________________________________________________

## id: 01K6FNY6Q90TH7YTWDRSBS8ZQJ

______________________________________________________________________

## id: 01K6FND5NSDS8Y93V4MVV4YG2Y

______________________________________________________________________

## id: 01K6FN9CY46H5A4XY06662MPSK

______________________________________________________________________

## id: 01K6FM8T5ERTBEYGS4VVAYHRDP

______________________________________________________________________

## id: 01K6FM4GBDBVTXP9A2TBMSVM7P

______________________________________________________________________

## id: 01K6FM33PGZTDE1WAM271KYAXG

______________________________________________________________________

## id: 01K6FKYWYGREW82RXHNE5WK4R7

______________________________________________________________________

## id: 01K6FKXG2QQ2V7QRMYW8FH6GM5

______________________________________________________________________

## id: 01K6FD9HHZS931C04J5XT16D48

______________________________________________________________________

## id: 01K6FCP8HZ2JKQQ4GYBC84XETM

______________________________________________________________________

## id: 01K6FBZAWAP27275B75R8SH1VF

______________________________________________________________________

## id: 01K6FBRRTS3B9X00RSZ919085D

______________________________________________________________________

## id: 01K6FBJHPJPZ0DPVD8AJ53G1XS

______________________________________________________________________

## id: 01K6FB8K9YNWZ9NGXS5HJ0N4V1

______________________________________________________________________

## id: 01K6F9NY665MWYDQ3PPTQNBS6V

______________________________________________________________________

## id: 01K6F9JXMZSCGPANVBSP8S6FBK

______________________________________________________________________

## id: 01K6F9HZJNRTA0Q8W3E7X6QEN5

______________________________________________________________________

## id: 01K6F9FFQJ0KH72YPBJ8R5X0HK

______________________________________________________________________

## id: 01K6F9EJ503QFNKZAPSNEN7SR7

______________________________________________________________________

## id: 01K6F8HJGK4V1A5YG75T10SM01

______________________________________________________________________

## id: 01K6F85WQRTFK4B8YYBZF4DZB6

______________________________________________________________________

## id: 01K6F6ZJDZJ1X6RA3AXNYP6R88

______________________________________________________________________

## id: 01K6F6Y7R6R16JV6G867PZX009

______________________________________________________________________

## id: 01K6F0QH125WFFBPAMQBZM5600

______________________________________________________________________

## id: 01K6F060VK34YNE8PJAEEX1PFQ

______________________________________________________________________

## id: 01K6EZZT3PJKY4J7GRH5JM7T98

______________________________________________________________________

## id: 01K6EZZ6TWMQ38AB7N8FVMBKHA

______________________________________________________________________

## id: 01K6EZMYG7MD01SPRSFNJV4T4V

______________________________________________________________________

## id: 01K6EZM4JHX0400CPBBP7WZMQ2

______________________________________________________________________

## id: 01K6EZ6T9WZ47WJAHYN0R5QBVJ

______________________________________________________________________

## id: 01K6EZ65R462FQ4F4WEWS058AN

______________________________________________________________________

## id: 01K6EYVJ6B32MZG6WDXBCKK9S4

# Migration Guide: ACB 0.19.0

This guide provides specific instructions for migrating to ACB 0.19.0.

## Overview

ACB 0.19.0 introduces significant architectural simplifications and modernizations:

- **Simplified Architecture**: Removed complex enterprise features in favor of simplicity
- **Basic Resource Cleanup**: Simple, reliable cleanup patterns without over-engineering
- **Essential SSL/TLS**: Basic SSL configuration support where needed
- **Streamlined Cache Operations**: Simple caching with standard aiocache interface
- **Configuration Hot-Reloading**: Basic configuration monitoring built into config system
- **Python 3.13+ Required**: Minimum Python version requirement

## Breaking Changes

### 1. Python Version Requirement

**Change**: ACB now requires Python 3.13 or later.

**Migration**:

```bash
# Install Python 3.13
uv python install 3.13

# Recreate virtual environment
rm -rf .venv
uv venv --python 3.13
uv sync
```

### 2. Configuration Structure

**Change**: Configuration files moved to `settings/` directory with standardized naming.

**Old Structure**:

```
project/
├── config.yaml
├── debug.yaml
└── .env
```

**New Structure**:

```
project/
└── settings/
    ├── app.yml          # Application config (was config.yaml)
    ├── debug.yml        # Debug config (was debug.yaml)
    ├── adapters.yml     # Adapter selection (new)
    ├── models.yml       # Models framework config (new)
    └── secrets/
        └── .env         # Environment secrets
```

**Migration**:

```bash
# Automatic migration
python -c "
from acb.migration import MigrationManager
import asyncio

async def migrate():
    manager = MigrationManager()
    result = await manager.migrate(target_version='0.19.0')
    print(f'Migration: {result.status}')

asyncio.run(migrate())
"

# Or manual migration
mkdir -p settings/secrets
mv config.yaml settings/app.yml
mv debug.yaml settings/debug.yml
mv .env settings/secrets/.env
```

### 3. Adapter Configuration

**Change**: Adapter selection now configured in `settings/adapters.yml`.

**Example Configuration**:

```yaml
# settings/adapters.yml
cache: redis        # or: memory
storage: s3         # or: file, gcs, azure
sql: postgresql     # or: mysql, sqlite
models: true        # Enable models adapter
nosql: mongodb      # or: firestore, redis
ftpd: sftp          # or: ftp
```

**Migration**:

```bash
# Create default adapters.yml
cat > settings/adapters.yml << EOF
# ACB Adapter Configuration
cache: redis
storage: s3
sql: postgresql
models: true
EOF
```

### 4. Pydantic V2 ConfigDict

**Change**: Pydantic models now use `model_config = ConfigDict()` instead of `class Config:`.

**Old Pattern**:

```python
from pydantic import BaseModel


class MyModel(BaseModel):
    field: str

    class Config:
        extra = "forbid"
        frozen = True
```

**New Pattern**:

```python
from pydantic import BaseModel, ConfigDict


class MyModel(BaseModel):
    field: str

    model_config = ConfigDict(extra="forbid", frozen=True)
```

**Migration**: Automatic migration script handles this pattern in ACB codebase. For your code:

```bash
# Use ACB's migration system
from acb.migration import MigrationManager
manager = MigrationManager()
result = await manager.migrate(target_version="0.19.0")
```

## Simplified Features

### 1. Resource Cleanup

**Change**: Complex cleanup systems replaced with simple CleanupMixin.

**Old Pattern** (removed):

```python
# Complex enterprise patterns removed
class ComplexAdapter(ResourceManager, HealthCheckable):
    async def check_health(self):
        # Complex health checking
        pass
```

**New Pattern**:

```python
from acb.core.cleanup import CleanupMixin


class SimpleAdapter(CleanupMixin):
    def __init__(self):
        super().__init__()
        self._client = None

    async def _create_client(self):
        client = SomeClient()
        self.register_resource(client)  # Automatic cleanup
        return client
```

### 2. Cache Operations

**Change**: Cache adapters provide simple, reliable interface.

**Example**:

```python
from acb.depends import depends
from acb.adapters import import_adapter

Cache = import_adapter("cache")
cache = depends.get(Cache)

# Basic operations
await cache.set("key", "value", ttl=300)
value = await cache.get("key")
await cache.delete("key")

# Standard aiocache interface
await cache.add("key", "value")  # Set only if not exists
await cache.increment("counter", delta=1)  # Atomic increment
await cache.expire("key", ttl=60)  # Update TTL
await cache.multi_set({"k1": "v1", "k2": "v2"})  # Batch operations

# Automatic resource cleanup
async with cache:
    await cache.set("temp", "data")
    # Cleanup happens automatically
```

### 3. Configuration Hot-Reloading

**Change**: Basic configuration monitoring built into config system.

**Usage**:

```python
from acb.config import Config, enable_config_hot_reload

# Enable simple hot-reloading
config = Config()
hot_reload = await enable_config_hot_reload(config, check_interval=5.0)

# Configuration files are monitored automatically:
# - settings/app.yml
# - settings/adapters.yml
# - settings/debug.yml
# - settings/models.yml

# Stop monitoring when done
await hot_reload.stop()
```

## Removed Features

### Complex Enterprise Features (Removed)

The following complex features have been removed to focus on core functionality:

- ❌ Complex enterprise monitoring and health checking
- ❌ Advanced retry mechanisms and circuit breakers
- ❌ Multi-tier caching strategies and complex query builders
- ❌ Distributed tracing and observability frameworks
- ❌ Rate limiting and advanced security systems
- ❌ Backup and restore functionality

### Preserved Essential Features (Kept)

- ✅ Basic resource cleanup patterns
- ✅ SSL/TLS configuration support
- ✅ Simple configuration hot-reloading
- ✅ Core adapter functionality
- ✅ Basic model framework support

## Migration Steps

### Step 1: Update Python Version

```bash
# Check current Python version
python --version

# Install Python 3.13 if needed
uv python install 3.13

# Recreate virtual environment
rm -rf .venv
uv venv --python 3.13
```

### Step 2: Update ACB

```bash
# Update ACB to 0.19.0
uv add acb@0.19.0

# Sync dependencies
uv sync
```

### Step 3: Run Migration Assessment

```python
from acb.migration import assess_migration
from pathlib import Path

# Assess migration requirements
assessment = await assess_migration(target_version="0.19.0", config_dir=Path.cwd())

print(f"Compatibility: {assessment.compatibility_status}")
print(f"Required steps: {len(assessment.required_steps)}")
print(f"Estimated duration: {assessment.estimated_duration}s")

# Check for critical issues
if assessment.has_critical_issues:
    print("\nCritical issues found:")
    for issue in assessment.issues:
        if issue.severity == "critical":
            print(f"- {issue.message}")
```

### Step 4: Run Automated Migration

```python
from acb.migration import MigrationManager

# Create migration manager
manager = MigrationManager()

# Run migration with automatic rollback
result = await manager.migrate(
    target_version="0.19.0",
    auto_rollback=True,  # Rollback on error
)

if result.success:
    print(f"✓ Migration completed in {result.metrics.duration_seconds}s")
    print(f"Files modified: {result.metrics.files_modified}")
else:
    print(f"✗ Migration failed: {result.errors}")
    if result.status == "rolled_back":
        print("Changes were automatically rolled back")
```

### Step 5: Update Project Code

#### Update Pydantic Models

```python
# Before
class MyModel(BaseModel):
    field: str

    class Config:
        extra = "forbid"


# After
from pydantic import ConfigDict


class MyModel(BaseModel):
    field: str

    model_config = ConfigDict(extra="forbid")
```

#### Update Adapter Patterns

```python
# Before (complex patterns removed)
class MyAdapter(ResourceManager):
    async def check_health(self):
        # Complex health checking
        pass


# After (simple cleanup)
from acb.core.cleanup import CleanupMixin


class MyAdapter(CleanupMixin):
    def __init__(self):
        super().__init__()

    async def _create_client(self):
        client = SomeClient()
        self.register_resource(client)
        return client
```

#### Update Cache Usage

```python
# Before (complex caching strategies)
cache = ComplexCacheWithTiers()
await cache.get_with_fallback(key, fallback_key)

# After (simple, reliable caching)
from acb.adapters import import_adapter
from acb.depends import depends

Cache = import_adapter("cache")
cache = depends.get(Cache)

# Simple operations
value = await cache.get(key)
if value is None:
    value = await cache.get(fallback_key)
```

### Step 6: Update Configuration

```bash
# Create settings directory structure
mkdir -p settings/secrets

# Move/create configuration files
# (migration script handles this automatically)

# Create adapters.yml
cat > settings/adapters.yml << EOF
cache: redis
storage: s3
sql: postgresql
models: true
EOF

# Create models.yml
cat > settings/models.yml << EOF
sqlmodel: true
pydantic: true
redis_om: false
msgspec: false
attrs: false
EOF
```

### Step 7: Validate Migration

```python
from acb.migration import MigrationValidator
from pathlib import Path

validator = MigrationValidator()

# Validate migration results
result = await validator.validate_migration(
    project_root=Path.cwd(), config=migration_config
)

if result.success:
    print(f"✓ Validation passed: {result.checks_passed} checks")
else:
    print(f"✗ Validation failed: {result.checks_failed} checks")
    for issue in result.issues:
        print(f"\n{issue.severity}: {issue.component}")
        print(f"  {issue.message}")
        if issue.fix_suggestion:
            print(f"  Fix: {issue.fix_suggestion}")
```

### Step 8: Run Tests

```bash
# Run test suite
python -m pytest

# Run with coverage
python -m pytest --cov=acb --cov-report=term

# Run specific test categories
python -m pytest -m unit
python -m pytest -m integration
```

### Step 9: Update Dependencies

```bash
# Sync all dependencies
uv sync

# Update specific adapter dependencies
uv add "acb[cache,sql,storage]"

# Or install all adapters
uv add "acb[all]"
```

## Rollback Instructions

If migration fails or you need to revert:

```python
from acb.migration import MigrationManager

manager = MigrationManager()

# List available rollback points
rollback_points = manager.list_rollback_points()

for point in rollback_points:
    print(f"ID: {point.id}")
    print(f"Version: {point.version}")
    print(f"Created: {point.created_at}")
    print()

# Rollback to most recent point
if rollback_points:
    success = await manager.rollback(rollback_points[0].id)
    if success:
        print("✓ Rollback completed")
    else:
        print("✗ Rollback failed")
```

## Testing Checklist

After migration, verify:

- [ ] All tests pass (`python -m pytest`)
- [ ] No Pydantic deprecation warnings
- [ ] Configuration files in correct locations
- [ ] Adapter configuration working (`settings/adapters.yml`)
- [ ] Cache operations working correctly
- [ ] Resource cleanup working (no leaks)
- [ ] Hot-reloading working (if enabled)
- [ ] SSL/TLS configuration working (if used)
- [ ] Dependencies up to date (`uv sync`)
- [ ] Project functionality unchanged

## Common Issues

### Issue: Python Version Mismatch

**Symptom**: `Python 3.12 is not supported`

**Solution**:

```bash
uv python install 3.13
uv venv --python 3.13
uv sync
```

### Issue: Missing Configuration Files

**Symptom**: `settings/adapters.yml not found`

**Solution**:

```bash
mkdir -p settings
cat > settings/adapters.yml << EOF
cache: redis
sql: postgresql
EOF
```

### Issue: Pydantic Deprecation Warnings

**Symptom**: `class Config is deprecated`

**Solution**: Update models to use ConfigDict:

```python
from pydantic import ConfigDict


class MyModel(BaseModel):
    model_config = ConfigDict(extra="forbid")
```

### Issue: Import Errors

**Symptom**: `Cannot import name 'ResourceManager'`

**Solution**: Complex features removed - use simple patterns:

```python
from acb.core.cleanup import CleanupMixin


class MyAdapter(CleanupMixin):
    pass
```

## Getting Help

- **Migration Issues**: https://github.com/lesleslie/acb/issues
- **Documentation**: https://acb.readthedocs.io
- **Migration Guide**: See MIGRATION-GUIDE.md
- **Changelog**: See CHANGELOG.md

## Additional Resources

- **MIGRATION-GUIDE.md**: General migration documentation
- **CHANGELOG.md**: Detailed version history
- **API Reference**: https://acb.readthedocs.io/api/
- **Examples**: https://github.com/lesleslie/acb-examples
